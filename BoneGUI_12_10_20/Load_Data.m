%% Load_Data()%% mida group http://mida.dima.unige.it - 2010/2015%%%% once the subject has been selected, this functions:%%%% initializes of the ROIs with Initialize_ROI(it)%%%% creates of the paths for MAT, DICOM, and TXT output%%%% preprocesses the data with Preprocessing_Files()%%%% saves the file Info.mat %%%% calls Table_CTPT_Series() where the user can select the CT and PT series%%%%%%%% called by: main_gui(action,varargin)%%%% call: Save_All()%%%%       Gui_Initialization()%%%%       Initialize_ROI(it)%%%%       Preprocessing_Files()%%%%       Table_CTPT_Series()function Load_Data()global pet_gui;global ROI;global Info;%%% check if roi have been already createdif iscell(ROI)    temp_empty = 0;    for itROI = 1 : length(ROI);        temp_empty = temp_empty+ROI{itROI}.RoiEmpty;    end        if temp_empty              choice = questdlg('Do you want to SAVE ALL the existing ROI?', ...            '!!Warning!!','Yes','No','Yes');        switch choice            case 'Yes'                Save_All;            case 'No'        end    end    clear temp_empty;endset(pet_gui.PANELload.TXTload,'string','');%%******************** callback script  *********************************%%Gui_Initialization;%%********************    end script    *********************************%%%%%% selection of the subjectif isfield(pet_gui,'InputPath')    InputPath = uigetdir(pet_gui.InputPath, 'Choose patient path');else    start_path = pwd;    InputPath = uigetdir(start_path, 'Choose patient path');endif InputPath ==  0else    pet_gui.InputPath = InputPath;    pet_gui.PANELroi.ROIName;    for it = 1 : length(pet_gui.PANELroi.ROIName)-1;        Initialize_ROI(it);    end        Info_mat_file = [InputPath '_MAT' pet_gui.slash_pc_mac, 'Info.mat'];        if ~exist([InputPath '_MAT'],'dir'), mkdir([InputPath '_MAT']); end        Info.InputPath = InputPath;    Info.InputPathMAT = [InputPath '_MAT'];    Info.OutputPathDICOM = [InputPath '_OUTPUT_DICOM'];    Info.OutputPathPAR = [InputPath '_OUTPUT_PARAMETERS'];    Info.OutputPathTXT = [InputPath '_OUTPUT_TXT'];        set(pet_gui.PANELload.TXTload,'string',strtrim(InputPath));    if exist(Info_mat_file,'file')        load(Info_mat_file);                Info.InputPath = InputPath;        Info.InputPathMAT = [InputPath '_MAT'];        Info.OutputPathDICOM = [InputPath '_OUTPUT_DICOM'];        Info.OutputPathTXT = [InputPath '_OUTPUT_TXT'];    else                %%******************** callback script  *********************************%%        Preprocessing_Files;        %%********************    end script    *********************************%%    end    save([Info.InputPathMAT pet_gui.slash_pc_mac 'Info.mat'],'Info','-mat');        %%******************** callback script  *********************************%%    Table_CTPT_Series;    %%********************    end script    *********************************%%endend