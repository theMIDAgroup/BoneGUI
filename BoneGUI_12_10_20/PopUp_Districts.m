%% PopUp_Districts()%% mida group http://mida.dima.unige.it - 2010/2015%%%% menu for the selection of the district:%%%% it enables the ROI kind (rectangle or ellipse),%%%% enables the choice of output through Enable_Roi()%%%% draws the roi calling the function Draw_ROI() %%%% and automatically selects the Hounsfield value for segmentation%%%% called by: main_gui(action,varargin) - panel 'ROI 1'%%%%            Reset_Roi()%%%% call: Show_Image()%%%%       Enable_ROI()%%%%       Draw_ROI()function PopUp_Districts()global pet_gui;global ROI;set(pet_gui.PANELroi.PANEL2.PB1,'enable','off');set(pet_gui.PANELroi.PANEL2.PB2,'enable','off');set(pet_gui.PANELroi.PANEL2.PB3,'enable','off');set(pet_gui.PANELroi.PANEL2.PB4,'enable','off');set(pet_gui.PANELroi.PANEL3.TXT1a,'enable','off');set(pet_gui.PANELroi.PANEL3.PB2,'enable','off');set(pet_gui.PANELroi.PANEL3.TXT3a,'enable','off');set(pet_gui.PANELroi.PANEL3.TXT1b,'string','');set(pet_gui.PANELroi.PANEL3.TXT2b,'string','');set(pet_gui.PANELroi.PANEL3.TXT3b,'string','');set(pet_gui.PANELroi.PANEL4.CKBOX1,'value',0,'enable','off');set(pet_gui.PANELroi.PANEL4.CKBOX2,'value',0,'enable','off');set(pet_gui.PANELroi.PANEL4.CKBOX3,'value',0,'enable','off');set(pet_gui.PANELroi.PANEL5.PB1,'enable','off');Show_Image;val = get(pet_gui.PANELroi.popup,'value')-1;pet_gui.PopupValue = val;if and(val,val-length(pet_gui.PANELroi.ROIName))        set(pet_gui.PANELroi.PANEL4.CKBOX1,'enable','on','value',ROI{val}.Enable);    set(pet_gui.PANELroi.PANEL4.CKBOX2,'value',ROI{val}.OutputTxt);    set(pet_gui.PANELroi.PANEL4.CKBOX3,'value',ROI{val}.OutputDicom);        Enable_Roi;    set(pet_gui.PANELroi.PANEL5.PB1,'enable','on');        set(pet_gui.PANELroi.PANEL2.PB1,'enable','on');    set(pet_gui.PANELroi.PANEL2.PB2,'enable','on');    set(pet_gui.PANELroi.PANEL2.PB3,'enable','on');    set(pet_gui.PANELroi.PANEL2.PB4,'enable','on');        %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%    %%%%% Selection of the Hounsfield value for segmentation    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%    if ismember(val,[2,3,4,5 ]) %%vertebre         ROI{val}.HURange = [60 110];    elseif val == 6 %%sternum        ROI{val}.HURange = [60 160];    else %%elsewhere        ROI{val}.HURange = [100 400];    end    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%        set(pet_gui.PANELroi.PANEL3.TXT1a,'enable','on');    set(pet_gui.PANELroi.PANEL3.TXT1b,'string',num2str(ROI{val}.StartCt));        set(pet_gui.PANELroi.PANEL3.TXT2b,'string',num2str(ROI{val}.EndCt));    if ~isempty(ROI{val}.RoiSlice) && ~ROI{val}.RoiEnd, set(pet_gui.PANELroi.PANEL3.PB2,'enable','on'); end    %    set(pet_gui.PANELroi.PANEL3.TXT3a,'enable','on');%    set(pet_gui.PANELroi.PANEL3.TXT3b,'string',num2str(ROI{val}.CenterCt));        if ~ROI{val}.RoiEmpty                [~,aux_position] = ismember(pet_gui.SliceNumber,ROI{val}.RoiSlice);        if aux_position            RoiPosition = ROI{val}.RoiPosition{aux_position};            RoiKind = ROI{val}.RoiKind{aux_position};            if ismember(ROI{val}.Id,[2,3,4,5])                RoiRemovePosition = ROI{val}.RoiRemovePosition{aux_position};                RoiRemoveKind = ROI{val}.RoiRemoveKind{aux_position};                Draw_Roi(RoiKind,RoiPosition,aux_position,'green',RoiRemoveKind,RoiRemovePosition,'red');            else                Draw_Roi(RoiKind,RoiPosition, aux_position);            end        end            endendend