%% Slider_Image()%% mida group http://mida.dima.unige.it - 2010/2015%%%% this function changes the slice in the figure plot%%%% if a roi is present, this function draws it using%%%% Draw_Roi(RoiKind,RoiPosition,aux_position)%%%% called by: main_gui(action,varargin) - panel 'CT Figure'%%%% call: Show_Image%%%%       Draw_Roi(RoiKind,RoiPosition,aux_position)function Slider_Image()global pet_gui;global ROI;Show_Image;val = pet_gui.PopupValue;if val    if ~ROI{val}.RoiEmpty        if ~ROI{val}.RoiSpherical            [~,aux_position] = ismember(pet_gui.SliceNumber,ROI{val}.RoiSlice);            if aux_position                RoiPosition = ROI{val}.RoiPosition{aux_position};                RoiKind = ROI{val}.RoiKind{aux_position};                if ~ismember(ROI{val}.Id,[2,3,4,5])                    Draw_Roi(RoiKind,RoiPosition,aux_position);                else                    RoiRemovePosition = ROI{val}.RoiRemovePosition{aux_position};                    RoiRemoveKind = ROI{val}.RoiRemoveKind{aux_position};                    Draw_Roi(RoiKind,RoiPosition,aux_position,'green',RoiRemoveKind,RoiRemovePosition,'red');                end            else                if pet_gui.SliceNumber> ROI{val}.RoiSlice(end) && ~ROI{val}.RoiEnd                    aux_position0 = size(ROI{val}.RoiSlice,1);                    ROI{val}.RoiSlice = [ROI{val}.RoiSlice ; ...                        (ROI{val}.RoiSlice(end)+1:1:pet_gui.SliceNumber).'];                    aux_position = size(ROI{val}.RoiSlice,1);                                        RoiKind = ROI{val}.RoiKind{end};                                        RoiPosition = ROI{val}.RoiPosition{end};                                                                                if ~ismember(ROI{val}.Id,[2,3,4,5])                                                Draw_Roi(RoiKind,RoiPosition,aux_position);                                            else                        RoiRemovePosition = ROI{val}.RoiRemovePosition{end};                        RoiRemoveKind = ROI{val}.RoiRemoveKind{end};                        for it = aux_position0:aux_position                            ROI{val}.RoiRemoveKind{it} = RoiRemoveKind;                            ROI{val}.RoiRemovePosition{it} = RoiRemovePosition;                        end                        Draw_Roi(RoiKind,RoiPosition,aux_position,'green',RoiRemoveKind,RoiRemovePosition,'red');                    end                                        for it = aux_position0:aux_position                        ROI{val}.RoiKind{it} = RoiKind;                        ROI{val}.RoiPosition{it} = RoiPosition;                        ROI{val}.RoiRegion(it,:) = ROI{val}.RoiRegion(aux_position0,:);                    end                end            end        else            [~,aux_position] = ismember(pet_gui.SliceNumber,ROI{val}.RoiSlice);            if aux_position                RoiPosition = ROI{val}.RoiPosition{aux_position};                RoiKind = ROI{val}.RoiKind{aux_position};                Draw_RoiSpherical(RoiKind,RoiPosition);            end        end    endendend